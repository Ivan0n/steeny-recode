<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MusicStream ‚Äî Steeny</title>

  <!-- –í–ê–ñ–ù–û: config —Å—Ç–∞–≤–∏–º –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ tailwind -->
  <script>
    tailwind = window.tailwind || {};
    tailwind.config = { darkMode: 'class' };
  </script>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
  const htmlEl = document.documentElement;
  const indicator = document.querySelector('.theme-indicator');
  const options = document.querySelectorAll('.theme-option');

  function setTheme(theme) {
    htmlEl.classList.remove('dark', 'purple', 'green');
    if (theme === 'dark') htmlEl.classList.add('dark');
    if (theme === 'purple') htmlEl.classList.add('purple');
    if (theme === 'green') htmlEl.classList.add('green');
    localStorage.setItem('theme', theme);

    // –ø–µ—Ä–µ–¥–≤–∏–≥–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
    const index = ['light', 'dark', 'purple', 'green'].indexOf(theme);
    if (index >= 0) {
      indicator.style.left = `calc(${index * 25}% + 4px)`;
    }
  }

  // –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π
  const stored = localStorage.getItem('theme') || 'light';
  setTheme(stored);

  // –∫–ª–∏–∫–∏ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
  options.forEach(opt => {
    opt.addEventListener('click', () => setTheme(opt.dataset.theme));
  });
});
</script>


  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='home.css') }}">
  <link rel="icon" type="image/png" href="https://i.pinimg.com/736x/5a/d6/ef/5ad6ef496c7a7c342b9b0fdf2bce426a.jpg">

  <style>
    /* –ù–µ–±–æ–ª—å—à–∏–µ CSS-–ø—Ä–∞–≤–∫–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –∏ —Å–ª–∞–π–¥–µ—Ä–æ–≤ */
    body { font-family: 'Inter', sans-serif; }
    /* –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Ü–≤–µ—Ç–æ–≤ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ */
    .theme-transition { transition: color .25s ease, background-color .25s ease; }

    /* –î–≤–∏–∂–µ–Ω–∏–µ –∫—Ä—É–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è (–±—É–¥–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –∫–ª–∞—Å—Å .translate-on) */
    .theme-dot { transition: transform .25s ease; display:block; }
    .translate-on { transform: translateX(1.25rem); } /* —Å—ä–µ–∑–∂–∞–µ—Ç –≤–ø—Ä–∞–≤–æ */

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä-—Ç—É–º–±–ª–µ—Ä–∞ –≤ dark */
    .seekbar::-webkit-slider-thumb { -webkit-appearance:none; width:14px; height:14px; border-radius:50%; background:#111827; }
    html.dark .seekbar::-webkit-slider-thumb { background:#f9fafb; }
    .volume-slider::-webkit-slider-thumb { -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:#111827; }
    html.dark .volume-slider::-webkit-slider-thumb { background:#f9fafb; }
  </style>
</head>

<body class="bg-white text-black dark:bg-gray-900 dark:text-white flex flex-col min-h-screen text-[15px] theme-transition">
  <div class="flex flex-1">
    <!-- –õ–µ–≤–æ–µ –º–µ–Ω—é -->
    <aside class="w-60 border-r flex flex-col justify-between transition-colors duration-200" id="sidebar" class="inverse-text">
      <div>
        <div class="flex items-center gap-3 p-5 border-b border-gray-200 dark:border-gray-700">
          <div class="w-10 h-10 rounded flex items-center justify-center font-bold text-lg overflow-hidden">
            <img src="https://i.pinimg.com/736x/5a/d6/ef/5ad6ef496c7a7c342b9b0fdf2bce426a.jpg" alt="" class="w-full h-full object-cover">
          </div>
          <span class="font-bold text-lg">Steeny</span>
        </div>
        <nav id="menu" class="mt-6 flex flex-col gap-3 px-3 text-base">
          <div class="menu-link active" data-section="home" style="padding:7px; border-radius:5px;"><i class="fa-solid fa-house"></i> –ì–ª–∞–≤–Ω–∞—è</div>
          <div class="menu-link" data-section="search" style="padding:7px; border-radius:5px;"><i class="fa-solid fa-magnifying-glass"></i> –ü–æ–∏—Å–∫</div>
          <div class="menu-link" data-section="favorites" style="padding:7px; border-radius:5px;"><i class="fa-solid fa-heart"></i> –õ—é–±–∏–º–æ–µ</div>
          <div class="menu-link" data-section="settings" style="padding:7px; border-radius:5px;"><i class="fa-solid fa-gear"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </nav>
      </div>
    </aside>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="flex-1 flex flex-col transition-colors duration-200" class="inverse-text" style="padding-left: 220px;">
      <header class="flex justify-end items-center p-5 border-b border-gray-200 dark:border-gray-700 theme-transition" class="inverse-text">
        <span class="nameuser" >{{ name }}</span>
        <img src="{{ avatar }}" class="w-10 h-10 rounded-full" alt="avatar">
      </header>

      <div id="content" class="flex-1 overflow-y-auto p-8 theme-transition">
        <!-- –ì–ª–∞–≤–Ω–∞—è -->
        <div id="section-home">
          <h2 class="text-2xl font-bold mb-4">üéµ –í—Å—è –º—É–∑—ã–∫–∞</h2>
          <div class="theme-card">
            <div class="flex items-center justify-between mb-4">
              
              <div class="flex items-center gap-2">
                <input type="text" placeholder="–§–∏–ª—å—Ç—Ä..."
                       class="px-3 py-1 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded text-sm theme-transition"
                       oninput="filterTracks(this.value)">
                <button class="p-1 text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-white">
                  <i class="fa-solid fa-arrow-down-wide-short"></i>
                  
                </button>
              </div>
              <i class="fa-solid "></i> <a href="https://dalink.to/ivan0n"><b>–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –¥–æ–Ω–∞—Ç–æ–º</b></a><br>
            </div>
            
            <div class="track-list" id="allTracksList" style=" overflow-x: hidden;">
              <!-- –¢—Ä–µ–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
            </div>
          </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div id="section-search" class="hidden">
          <h2 class="text-2xl font-bold mb-4">üîç –ü–æ–∏—Å–∫</h2>
          <div class="flex gap-2 mb-4">
            <input id="searchInput" type="text" placeholder="–ò—Å–∫–∞—Ç—å —Ç—Ä–µ–∫ –∏–ª–∏ –∞—Ä—Ç–∏—Å—Ç–∞..."
                   class="flex-1 border border-gray-300 dark:border-gray-600 rounded px-3 py-2 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white theme-transition">
            <button onclick="searchMusic()"
                    class="px-4 py-2 bg-black text-white rounded hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200 theme-transition">–ò—Å–∫–∞—Ç—å</button>
          </div>
          <div class="theme-card">
            <div id="searchResults" class="track-list" style="overflow-x: hidden;">
              <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
          </div>
        </div>

        <!-- –õ—é–±–∏–º–æ–µ -->
        <div id="section-favorites" class="hidden">
          <h2 class="text-2xl font-bold mb-4">‚ù§Ô∏è –õ—é–±–∏–º—ã–µ —Ç—Ä–µ–∫–∏</h2>
          <div class="theme-card">
            <div class="flex items-center justify-between mb-4">
            </div>
              <div class="track-list" id="favoritesList" style="overflow-x: hidden;">
            </div>
          </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="section-settings" class="hidden">
          <h2 class="text-2xl font-bold mb-4">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          <div class="theme-card">
            <div>
              <h2>–ò–º—è –∞–∫–∫–∞—É–Ω—Ç–∞: <b>{{ name }}</b></h2>
              <h2>username: <b><i>{{ user }}</i></b></h2>
              <i class="fa-solid "></i> <a href="http://91.205.220.128:2021/"><b>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ç—Ä–µ–∫</b></a><br>
              <i class="fa-solid fa-right-from-bracket"></i> <a href="/logout">–í—ã–π—Ç–∏</a>
            </div>
          </div>
          <div class="flex items-center gap-3 mt-4">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="checkbox" id="themeToggle" class="hidden">

              <div class="theme-toggle">
                <div class="theme-indicator"></div>
                <div class="theme-option" data-theme="light">Light</div>
                <div class="theme-option" data-theme="dark">Dark</div>
                <div class="theme-option" data-theme="purple">Purple</div>
                <div class="theme-option" data-theme="green">Green</div>
              </div>
            </label>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- ---- –ü–ª–µ–µ—Ä ---- -->
  <footer class="player border-t p-4 fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 dark:text-white border-gray-200 dark:border-gray-700 theme-transition">
    <div class="mb-4">
      <input type="range" id="seekbar" class="seekbar mb-1" value="0" max="100">
      <div class="flex justify-between w-full text-xs text-gray-500 dark:text-gray-400">
        <span id="currentTime">0:00</span>
        <span id="duration">0:00</span>
      </div>
    </div>

    <div class="flex items-center justify-between">
      <div class="left-meta">
        <img id="coverImg" src="https://via.placeholder.com/64" class="w-14 h-14 rounded" alt="cover">
        <div>
          <div id="trackTitle" class="font-semibold text-sm">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞</div>
          <div id="trackArtist" class="text-xs text-gray-500 dark:text-gray-400">–ê—Ä—Ç–∏—Å—Ç</div>
        </div>
        <button id="favBtn" class="ml-3 text-2xl text-gray-400 hover:text-yellow-500"><i class="fa-solid fa-star"></i></button>
      </div>

      <div class="controls-center">
        <button id="prevBtn" class="player-btn"><i class="fa-solid fa-backward-step"></i></button>
        <button id="playBtn" class="player-btn play"><i id="playIcon" class="fa-solid fa-play"></i></button>
        <button id="nextBtn" class="player-btn"><i class="fa-solid fa-forward-step"></i></button>
        <button id="repeatBtn" class="player-btn"><i id="repeatIcon" class="fa-solid fa-repeat"></i></button>
      </div>

      <div class="right-volume">
        <i id="volumeIcon" class="fa-solid fa-volume-high"></i>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="1">
      </div>
    </div>

    <audio id="audioPlayer"></audio>
  </footer>

  <script src="{{ url_for('static', filename='music_player_js/homepage.js') }}"></script>



</body>
</html>
